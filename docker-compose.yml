version: '3.8'

services:
  airspace-web:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: airspace-web
    ports:
      - "80:80"     # HTTP (redirects to HTTPS)
      - "443:443"   # HTTPS
    restart: unless-stopped
    volumes:
      # Mount Tailscale certificates from host
      - /var/lib/tailscale/certs:/etc/nginx/ssl:ro
    networks:
      - airspace-network
    depends_on:
      - airspace-backend

  # If your backend is in a separate repo/folder, remove this service
  # and use an external network to connect to it
  # airspace-backend:
  #   build: ../airspace-backend
  #   container_name: airspace-backend
  #   ports:
  #     - "8000:8000"
  #   restart: unless-stopped
  #   networks:
  #     - airspace-network

networks:
  airspace-network:
    external: true
    # Use 'external: true' if connecting to an existing backend network
    # driver: bridge
